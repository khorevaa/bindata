# bindata
Библиотека для запаковки любых бинарных файлов (.bin, .txt и прочих) в специальный файл класс .os

## Как это работает

Файлы запаковываются в специальный класс, который загружается вместе с остальными классами.

## Пример использования

В тексте модулей или классов необходимо заменить получение файла по пути на следующие строки:

Для примера, нам надо получить из скрипта файла по пути

Текущий вариант:

```bsl

ПутьКСценарию_ПроцессорыКоллекцийСлужебный = ОбъединитьПути(
	ТекущийСценарий().Каталог, 
	"ПроцессорыКоллекцийСлужебный.os"
);
ПроцессорыКоллекцийСлужебный = ЗагрузитьСценарий(ПутьКСценарию_ПроцессорыКоллекцийСлужебный);

```

С использование bindata:

```bsl

ПутьКСценарию_ПроцессорыКоллекцийСлужебный = БинарныеДанные.ПолучитьФайл("ПроцессорыКоллекцийСлужебный.os", ТекущийСценарий().Каталог, "fluent");

ПроцессорыКоллекцийСлужебный = ЗагрузитьСценарий(ПутьКСценарию_ПроцессорыКоллекцийСлужебный);

```

Как это работает, если в системе будет определен класс "bindata"+"fluent", где fluent, может меняться, тогда библиотека распакует данные из класса,
Если класса нет, тогда вернет путь к текущему файлу `ОбъединитьПути("ПроцессорыКоллекцийСлужебный.os", ТекущийСценарий().Каталог)`.

Теперь необходимо при создании библиотеки вызвать запаковку данных в класс:
Для этого надо добавить в файл packagedef: 

```bsl

Процедура ПередСборкой(Знач РабочийКаталог) Экспорт

    КаталогКлассовБиблиотеки = ОбъединитьПути(РабочийКаталог, "src","Классы");

    Запись = БинарныеДанные.ПодготовитьЗаписьКласса("fluent", КаталогКлассовБиблиотеки);
	Запись.ДобавитьФайл(ОбъединитьПути(РабочийКаталог, "src","Классы", "ПроцессорыКоллекцийСлужебный.os"));
	Запись.ЗаписатьКласс();

КонецПроцедуры

// После сборки необходимо очистить рабочий каталог от файлов bindata
Процедура ПослеСборки(Знач РабочийКаталог, Знач ПутьКФайлуПакета) Экспорт
    
    КаталогКлассовБиблиотеки = ОбъединитьПути(РабочийКаталог, "src","Классы");
    БинарныеДанные.ОчиститьКаталогОтКлассовBindata(КаталогКлассовБиблиотеки);
    
КонецПроцедуры

```
